/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/uplot@1.6.24/dist/uPlot.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const FEAT_TIME=!0,pre="u-",UPLOT="uplot",ORI_HZ="u-hz",ORI_VT="u-vt",TITLE="u-title",WRAP="u-wrap",UNDER="u-under",OVER="u-over",AXIS="u-axis",OFF="u-off",SELECT="u-select",CURSOR_X="u-cursor-x",CURSOR_Y="u-cursor-y",CURSOR_PT="u-cursor-pt",LEGEND="u-legend",LEGEND_LIVE="u-live",LEGEND_INLINE="u-inline",LEGEND_THEAD="u-thead",LEGEND_SERIES="u-series",LEGEND_MARKER="u-marker",LEGEND_LABEL="u-label",LEGEND_VALUE="u-value",WIDTH="width",HEIGHT="height",TOP="top",BOTTOM="bottom",LEFT="left",RIGHT="right",hexBlack="#000",transparent="#0000",mousemove="mousemove",mousedown="mousedown",mouseup="mouseup",mouseenter="mouseenter",mouseleave="mouseleave",dblclick="dblclick",resize="resize",scroll="scroll",change="change",dppxchange="dppxchange",LEGEND_DISP="--",domEnv="undefined"!=typeof window,doc=domEnv?document:null,win=domEnv?window:null,nav=domEnv?navigator:null;let pxRatio,query;function setPxRatio(){let e=devicePixelRatio;pxRatio!=e&&(pxRatio=e,query&&off(change,query,setPxRatio),query=matchMedia(`(min-resolution: ${pxRatio-.001}dppx) and (max-resolution: ${pxRatio+.001}dppx)`),on(change,query,setPxRatio),win.dispatchEvent(new CustomEvent(dppxchange)))}function addClass(e,l){if(null!=l){let t=e.classList;!t.contains(l)&&t.add(l)}}function remClass(e,l){let t=e.classList;t.contains(l)&&t.remove(l)}function setStylePx(e,l,t){e.style[l]=t+"px"}function placeTag(e,l,t,n){let i=doc.createElement(e);return null!=l&&addClass(i,l),null!=t&&t.insertBefore(i,n),i}function placeDiv(e,l){return placeTag("div",e,l)}const xformCache=new WeakMap;function elTrans(e,l,t,n,i){let s="translate("+l+"px,"+t+"px)";s!=xformCache.get(e)&&(e.style.transform=s,xformCache.set(e,s),l<0||t<0||l>n||t>i?addClass(e,OFF):remClass(e,OFF))}const colorCache=new WeakMap;function elColor(e,l,t){let n=l+t;n!=colorCache.get(e)&&(colorCache.set(e,n),e.style.background=l,e.style.borderColor=t)}const sizeCache=new WeakMap;function elSize(e,l,t,n){let i=l+""+t;i!=sizeCache.get(e)&&(sizeCache.set(e,i),e.style.height=t+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-t/2+"px":0)}const evOpts={passive:!0},evOpts2={...evOpts,capture:!0};function on(e,l,t,n){l.addEventListener(e,t,n?evOpts2:evOpts)}function off(e,l,t,n){l.removeEventListener(e,t,n?evOpts2:evOpts)}function closestIdx(e,l,t,n){let i;t=t||0;let s=(n=n||l.length-1)<=2147483647;for(;n-t>1;)i=s?t+n>>1:floor((t+n)/2),l[i]<e?t=i:n=i;return e-l[t]<=l[n]-e?t:n}function nonNullIdx(e,l,t,n){for(let i=1==n?l:t;i>=l&&i<=t;i+=n)if(null!=e[i])return i;return-1}function getMinMax(e,l,t,n){let i=inf,s=-inf;if(1==n)i=e[l],s=e[t];else if(-1==n)i=e[t],s=e[l];else for(let n=l;n<=t;n++)null!=e[n]&&(i=min(i,e[n]),s=max(s,e[n]));return[i,s]}function getMinMaxLog(e,l,t){let n=inf,i=-inf;for(let s=l;s<=t;s++)e[s]>0&&(n=min(n,e[s]),i=max(i,e[s]));return[n==inf?1:n,i==-inf?10:i]}function rangeLog(e,l,t,n){let i=sign(e),s=sign(l),o=10==t?log10:log2;e==l&&(-1==i?(e*=t,l/=t):(e/=t,l*=t));let r=1==s?ceil:floor,a=(1==i?floor:ceil)(o(abs(e))),u=r(o(abs(l))),c=pow(t,a),f=pow(t,u);return 10==t&&(a<0&&(c=roundDec(c,-a)),u<0&&(f=roundDec(f,-u))),n||2==t?(e=c*i,l=f*s):(e=incrRoundDn(e,c),l=incrRoundUp(l,f)),[e,l]}function rangeAsinh(e,l,t,n){let i=rangeLog(e,l,t,n);return 0==e&&(i[0]=0),0==l&&(i[1]=0),i}domEnv&&setPxRatio();const rangePad=.1,autoRangePart={mode:3,pad:.1},_eqRangePart={pad:0,soft:null,mode:0},_eqRange={min:_eqRangePart,max:_eqRangePart};function rangeNum(e,l,t,n){return isObj(t)?_rangeNum(e,l,t):(_eqRangePart.pad=t,_eqRangePart.soft=n?0:null,_eqRangePart.mode=n?3:0,_rangeNum(e,l,_eqRange))}function ifNull(e,l){return null==e?l:e}function hasData(e,l,t){for(l=ifNull(l,0),t=ifNull(t,e.length-1);l<=t;){if(null!=e[l])return!0;l++}return!1}function _rangeNum(e,l,t){let n=t.min,i=t.max,s=ifNull(n.pad,0),o=ifNull(i.pad,0),r=ifNull(n.hard,-inf),a=ifNull(i.hard,inf),u=ifNull(n.soft,inf),c=ifNull(i.soft,-inf),f=ifNull(n.mode,0),p=ifNull(i.mode,0),d=l-e,m=log10(d),h=max(abs(e),abs(l)),g=log10(h),x=abs(g-m);(d<1e-9||x>10)&&(d=0,0!=e&&0!=l||(d=1e-9,2==f&&u!=inf&&(s=0),2==p&&c!=-inf&&(o=0)));let S=d||h||1e3,w=log10(S),_=pow(10,floor(w)),y=roundDec(incrRoundDn(e-S*(0==d?0==e?.1:1:s),_/10),9),T=e>=u&&(1==f||3==f&&y<=u||2==f&&y>=u)?u:inf,b=max(r,y<T&&e>=T?T:min(T,y)),v=roundDec(incrRoundUp(l+S*(0==d?0==l?.1:1:o),_/10),9),D=l<=c&&(1==p||3==p&&v>=c||2==p&&v<=c)?c:-inf,P=min(a,v>D&&l<=D?D:max(D,v));return b==P&&0==b&&(P=100),[b,P]}const numFormatter=new Intl.NumberFormat(domEnv?nav.language:"en-US"),fmtNum=e=>numFormatter.format(e),M=Math,PI=M.PI,abs=M.abs,floor=M.floor,round=M.round,ceil=M.ceil,min=M.min,max=M.max,pow=M.pow,sign=M.sign,log10=M.log10,log2=M.log2,sinh=(e,l=1)=>M.sinh(e)*l,asinh=(e,l=1)=>M.asinh(e/l),inf=1/0;function numIntDigits(e){return 1+(0|log10((e^e>>31)-(e>>31)))}function clamp(e,l,t){return min(max(e,l),t)}function fnOrSelf(e){return"function"==typeof e?e:()=>e}const noop=()=>{},retArg0=e=>e,retArg1=(e,l)=>l,retNull=e=>null,retTrue=e=>!0,retEq=(e,l)=>e==l,fixFloat=e=>roundDec(e,14);function incrRound(e,l){return fixFloat(roundDec(fixFloat(e/l))*l)}function incrRoundUp(e,l){return fixFloat(ceil(fixFloat(e/l))*l)}function incrRoundDn(e,l){return fixFloat(floor(fixFloat(e/l))*l)}function roundDec(e,l=0){if(isInt(e))return e;let t=10**l,n=e*t*(1+Number.EPSILON);return round(n)/t}const fixedDec=new Map;function guessDec(e){return((""+e).split(".")[1]||"").length}function genIncrs(e,l,t,n){let i=[],s=n.map(guessDec);for(let o=l;o<t;o++){let l=abs(o),t=roundDec(pow(e,o),l);for(let e=0;e<n.length;e++){let r=n[e]*t,a=(r>=0&&o>=0?0:l)+(o>=s[e]?0:s[e]),u=roundDec(r,a);i.push(u),fixedDec.set(u,a)}}return i}const EMPTY_OBJ={},EMPTY_ARR=[],nullNullTuple=[null,null],isArr=Array.isArray,isInt=Number.isInteger,isUndef=e=>void 0===e;function isStr(e){return"string"==typeof e}function isObj(e){let l=!1;if(null!=e){let t=e.constructor;l=null==t||t==Object}return l}function fastIsObj(e){return null!=e&&"object"==typeof e}const TypedArray=Object.getPrototypeOf(Uint8Array);function copy(e,l=isObj){let t;if(isArr(e)){let n=e.find((e=>null!=e));if(isArr(n)||l(n)){t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=copy(e[n],l)}else t=e.slice()}else if(e instanceof TypedArray)t=e.slice();else if(l(e)){t={};for(let n in e)t[n]=copy(e[n],l)}else t=e;return t}function assign(e){let l=arguments;for(let t=1;t<l.length;t++){let n=l[t];for(let l in n)isObj(e[l])?assign(e[l],copy(n[l])):e[l]=copy(n[l])}return e}const NULL_REMOVE=0,NULL_RETAIN=1,NULL_EXPAND=2;function nullExpand(e,l,t){for(let n,i=0,s=-1;i<l.length;i++){let o=l[i];if(o>s){for(n=o-1;n>=0&&null==e[n];)e[n--]=null;for(n=o+1;n<t&&null==e[n];)e[s=n++]=null}}}function join(e,l){let t=new Set;for(let l=0;l<e.length;l++){let n=e[l][0],i=n.length;for(let e=0;e<i;e++)t.add(n[e])}let n=[Array.from(t).sort(((e,l)=>e-l))],i=n[0].length,s=new Map;for(let e=0;e<i;e++)s.set(n[0][e],e);for(let t=0;t<e.length;t++){let o=e[t],r=o[0];for(let e=1;e<o.length;e++){let a=o[e],u=Array(i).fill(void 0),c=l?l[t][e]:1,f=[];for(let e=0;e<a.length;e++){let l=a[e],t=s.get(r[e]);null===l?0!=c&&(u[t]=l,2==c&&f.push(t)):u[t]=l}nullExpand(u,f,i),n.push(u)}}return n}const microTask="undefined"==typeof queueMicrotask?e=>Promise.resolve().then(e):queueMicrotask,months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function slice3(e){return e.slice(0,3)}const days3=days.map(slice3),months3=months.map(slice3),engNames={MMMM:months,MMM:months3,WWWW:days,WWW:days3};function zeroPad2(e){return(e<10?"0":"")+e}function zeroPad3(e){return(e<10?"00":e<100?"0":"")+e}const subs={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>zeroPad2(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>zeroPad2(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>zeroPad2(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return 0==l?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>zeroPad2(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>zeroPad2(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>zeroPad3(e.getMilliseconds())};function fmtDate(e,l){l=l||engNames;let t,n=[],i=/\{([a-z]+)\}|[^{]+/gi;for(;t=i.exec(e);)n.push("{"==t[0][0]?subs[t[1]]:t[0]);return e=>{let t="";for(let i=0;i<n.length;i++)t+="string"==typeof n[i]?n[i]:n[i](e,l);return t}}const localTz=(new Intl.DateTimeFormat).resolvedOptions().timeZone;function tzDate(e,l){let t;return"UTC"==l||"Etc/UTC"==l?t=new Date(+e+6e4*e.getTimezoneOffset()):l==localTz?t=e:(t=new Date(e.toLocaleString("en-US",{timeZone:l})),t.setMilliseconds(e.getMilliseconds())),t}const onlyWhole=e=>e%1==0,allMults=[1,2,2.5,5],decIncrs=genIncrs(10,-16,0,allMults),oneIncrs=genIncrs(10,0,16,allMults),wholeIncrs=oneIncrs.filter(onlyWhole),numIncrs=decIncrs.concat(oneIncrs),NL="\n",yyyy="{YYYY}",NLyyyy=NL+yyyy,md="{M}/{D}",NLmd=NL+md,NLmdyy=NLmd+"/{YY}",aa="{aa}",hmm="{h}:{mm}",hmmaa=hmm+aa,NLhmmaa=NL+hmmaa,ss=":{ss}",_=null;function genTimeStuffs(e){let l=1e3*e,t=60*l,n=60*t,i=24*n,s=30*i,o=365*i;return[(1==e?genIncrs(10,0,3,allMults).filter(onlyWhole):genIncrs(10,-3,0,allMults)).concat([l,5*l,10*l,15*l,30*l,t,5*t,10*t,15*t,30*t,n,2*n,3*n,4*n,6*n,8*n,12*n,i,2*i,3*i,4*i,5*i,6*i,7*i,8*i,9*i,10*i,15*i,s,2*s,3*s,4*s,6*s,o,2*o,5*o,10*o,25*o,50*o,100*o]),[[o,yyyy,_,_,_,_,_,_,1],[28*i,"{MMM}",NLyyyy,_,_,_,_,_,1],[i,md,NLyyyy,_,_,_,_,_,1],[n,"{h}"+aa,NLmdyy,_,NLmd,_,_,_,1],[t,hmmaa,NLmdyy,_,NLmd,_,_,_,1],[l,ss,NLmdyy+" "+hmmaa,_,NLmd+" "+hmmaa,_,NLhmmaa,_,1],[e,ss+".{fff}",NLmdyy+" "+hmmaa,_,NLmd+" "+hmmaa,_,NLhmmaa,_,1]],function(l){return(r,a,u,c,f,p)=>{let d=[],m=f>=o,h=f>=s&&f<o,g=l(u),x=roundDec(g*e,3),S=mkDate(g.getFullYear(),m?0:g.getMonth(),h||m?1:g.getDate()),w=roundDec(S*e,3);if(h||m){let t=h?f/s:0,n=m?f/o:0,i=x==w?x:roundDec(mkDate(S.getFullYear()+n,S.getMonth()+t,1)*e,3),r=new Date(round(i/e)),a=r.getFullYear(),u=r.getMonth();for(let s=0;i<=c;s++){let o=mkDate(a+n*s,u+t*s,1),r=o-l(roundDec(o*e,3));i=roundDec((+o+r)*e,3),i<=c&&d.push(i)}}else{let s=f>=i?i:f,o=w+(floor(u)-floor(x))+incrRoundUp(x-w,s);d.push(o);let m=l(o),h=m.getHours()+m.getMinutes()/t+m.getSeconds()/n,g=f/n,S=p/r.axes[a]._space;for(;o=roundDec(o+f,1==e?0:3),!(o>c);)if(g>1){let e=floor(roundDec(h+g,6))%24,t=l(o).getHours()-e;t>1&&(t=-1),o-=t*n,h=(h+g)%24,roundDec((o-d[d.length-1])/f,3)*S>=.7&&d.push(o)}else d.push(o)}return d}}]}const[timeIncrsMs,_timeAxisStampsMs,timeAxisSplitsMs]=genTimeStuffs(1),[timeIncrsS,_timeAxisStampsS,timeAxisSplitsS]=genTimeStuffs(.001);function timeAxisStamps(e,l){return e.map((e=>e.map(((t,n)=>0==n||8==n||null==t?t:l(1==n||0==e[8]?t:e[1]+t)))))}function timeAxisVals(e,l){return(t,n,i,s,o)=>{let r,a,u,c,f,p,d=l.find((e=>o>=e[0]))||l[l.length-1];return n.map((l=>{let t=e(l),n=t.getFullYear(),i=t.getMonth(),s=t.getDate(),o=t.getHours(),m=t.getMinutes(),h=t.getSeconds(),g=n!=r&&d[2]||i!=a&&d[3]||s!=u&&d[4]||o!=c&&d[5]||m!=f&&d[6]||h!=p&&d[7]||d[1];return r=n,a=i,u=s,c=o,f=m,p=h,g(t)}))}}function timeAxisVal(e,l){let t=fmtDate(l);return(l,n,i,s,o)=>n.map((l=>t(e(l))))}function mkDate(e,l,t){return new Date(e,l,t)}function timeSeriesStamp(e,l){return l(e)}genIncrs(2,-53,53,[1]);const _timeSeriesStamp="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function timeSeriesVal(e,l){return(t,n,i,s)=>null==s?"--":l(e(n))}function legendStroke(e,l){let t=e.series[l];return t.width?t.stroke(e,l):t.points.width?t.points.stroke(e,l):null}function legendFill(e,l){return e.series[l].fill(e,l)}const legendOpts={show:!0,live:!0,isolate:!1,mount:noop,markers:{show:!0,width:2,stroke:legendStroke,fill:legendFill,dash:"solid"},idx:null,idxs:null,values:[]};function cursorPointShow(e,l){let t=e.cursor.points,n=placeDiv(),i=t.size(e,l);setStylePx(n,WIDTH,i),setStylePx(n,HEIGHT,i);let s=i/-2;setStylePx(n,"marginLeft",s),setStylePx(n,"marginTop",s);let o=t.width(e,l,i);return o&&setStylePx(n,"borderWidth",o),n}function cursorPointFill(e,l){let t=e.series[l].points;return t._fill||t._stroke}function cursorPointStroke(e,l){let t=e.series[l].points;return t._stroke||t._fill}function cursorPointSize(e,l){return e.series[l].points.size}function dataIdx(e,l,t){return t}const moveTuple=[0,0];function cursorMove(e,l,t){return moveTuple[0]=l,moveTuple[1]=t,moveTuple}function filtBtn0(e,l,t){return e=>{0==e.button&&t(e)}}function passThru(e,l,t){return t}const cursorOpts={show:!0,x:!0,y:!0,lock:!1,move:cursorMove,points:{show:cursorPointShow,size:cursorPointSize,width:0,stroke:cursorPointStroke,fill:cursorPointFill},bind:{mousedown:filtBtn0,mouseup:filtBtn0,click:filtBtn0,dblclick:filtBtn0,mousemove:passThru,mouseleave:passThru,mouseenter:passThru},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{prox:-1,bias:0},left:-10,top:-10,idx:null,dataIdx:dataIdx,idxs:null},axisLines={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},grid=assign({},axisLines,{filter:retArg1}),ticks=assign({},grid,{size:10}),border=assign({},axisLines,{show:!1}),font='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',labelFont="bold "+font,lineMult=1.5,xAxisOpts={show:!0,scale:"x",stroke:"#000",space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:labelFont,side:2,grid:grid,ticks:ticks,border:border,font:font,rotate:0},numSeriesLabel="Value",timeSeriesLabel="Time",xSeriesOpts={show:!0,scale:"x",auto:!1,sorted:1,min:inf,max:-inf,idxs:[]};function numAxisVals(e,l,t,n,i){return l.map((e=>null==e?"":fmtNum(e)))}function numAxisSplits(e,l,t,n,i,s,o){let r=[],a=fixedDec.get(i)||0;for(let e=t=o?t:roundDec(incrRoundUp(t,i),a);e<=n;e=roundDec(e+i,a))r.push(Object.is(e,-0)?0:e);return r}function logAxisSplits(e,l,t,n,i,s,o){const r=[],a=e.scales[e.axes[l].scale].log,u=floor((10==a?log10:log2)(t));i=pow(a,u),10==a&&u<0&&(i=roundDec(i,-u));let c=t;do{r.push(c),c+=i,10==a&&(c=roundDec(c,fixedDec.get(i))),c>=i*a&&(i=c)}while(c<=n);return r}function asinhAxisSplits(e,l,t,n,i,s,o){let r=e.scales[e.axes[l].scale].asinh,a=n>r?logAxisSplits(e,l,max(r,t),n,i):[r],u=n>=0&&t<=0?[0]:[];return(t<-r?logAxisSplits(e,l,max(r,-n),-t,i):[r]).reverse().map((e=>-e)).concat(u,a)}const RE_ALL=/./,RE_12357=/[12357]/,RE_125=/[125]/,RE_1=/1/;function log10AxisValsFilt(e,l,t,n,i){let s=e.axes[t],o=s.scale,r=e.scales[o];if(3==r.distr&&2==r.log)return l;let a=e.valToPos,u=s._space,c=a(10,o),f=a(9,o)-c>=u?RE_ALL:a(7,o)-c>=u?RE_12357:a(5,o)-c>=u?RE_125:RE_1;return l.map((e=>4==r.distr&&0==e||f.test(e)?e:null))}function numSeriesVal(e,l,t,n){return null==n?"--":null==l?"":fmtNum(l)}const yAxisOpts={show:!0,scale:"y",stroke:"#000",space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:labelFont,side:3,grid:grid,ticks:ticks,border:border,font:font,rotate:0};function ptDia(e,l){return roundDec((3+2*(e||1))*l,3)}function seriesPointsShow(e,l){let{scale:t,idxs:n}=e.series[0],i=e._data[0],s=e.valToPos(i[n[0]],t,!0),o=e.valToPos(i[n[1]],t,!0),r=abs(o-s)/(e.series[l].points.space*pxRatio);return n[1]-n[0]<=r}const facet={scale:null,auto:!0,sorted:0,min:inf,max:-inf},gaps=(e,l,t,n,i)=>i,xySeriesOpts={show:!0,auto:!0,sorted:0,gaps:gaps,alpha:1,facets:[assign({},facet,{scale:"x"}),assign({},facet,{scale:"y"})]},ySeriesOpts={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:gaps,alpha:1,points:{show:seriesPointsShow,filter:null},values:null,min:inf,max:-inf,idxs:[],path:null,clip:null};function clampScale(e,l,t,n,i){return t/10}const xScaleOpts={time:true,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},yScaleOpts=assign({},xScaleOpts,{time:!1,ori:1}),syncs={};function _sync(e,l){let t=syncs[e];return t||(t={key:e,plots:[],sub(e){t.plots.push(e)},unsub(e){t.plots=t.plots.filter((l=>l!=e))},pub(e,l,n,i,s,o,r){for(let a=0;a<t.plots.length;a++)t.plots[a]!=l&&t.plots[a].pub(e,l,n,i,s,o,r)}},null!=e&&(syncs[e]=t)),t}const BAND_CLIP_FILL=1,BAND_CLIP_STROKE=2;function orient(e,l,t){const n=e.mode,i=e.series[l],s=2==n?e._data[l]:e._data,o=e.scales,r=e.bbox;let a=s[0],u=2==n?s[1]:s[l],c=2==n?o[i.facets[0].scale]:o[e.series[0].scale],f=2==n?o[i.facets[1].scale]:o[i.scale],p=r.left,d=r.top,m=r.width,h=r.height,g=e.valToPosH,x=e.valToPosV;return 0==c.ori?t(i,a,u,c,f,g,x,p,d,m,h,moveToH,lineToH,rectH,arcH,bezierCurveToH):t(i,a,u,c,f,x,g,d,p,h,m,moveToV,lineToV,rectV,arcV,bezierCurveToV)}function bandFillClipDirs(e,l){let t=0,n=0,i=ifNull(e.bands,EMPTY_ARR);for(let e=0;e<i.length;e++){let s=i[e];s.series[0]==l?t=s.dir:s.series[1]==l&&(1==s.dir?n|=1:n|=2)}return[t,1==n?-1:2==n?1:3==n?2:0]}function seriesFillTo(e,l,t,n,i){let s=e.mode,o=e.series[l],r=2==s?o.facets[1].scale:o.scale,a=e.scales[r];return-1==i?a.min:1==i?a.max:3==a.distr?1==a.dir?a.min:a.max:0}function clipBandLine(e,l,t,n,i,s){return orient(e,l,((e,l,o,r,a,u,c,f,p,d,m)=>{let h=e.pxRound;const g=r.dir*(0==r.ori?1:-1),x=0==r.ori?lineToH:lineToV;let S,w;1==g?(S=t,w=n):(S=n,w=t);let _=h(u(l[S],r,d,f)),y=h(c(o[S],a,m,p)),T=h(u(l[w],r,d,f)),b=h(c(1==s?a.max:a.min,a,m,p)),v=new Path2D(i);return x(v,T,b),x(v,_,b),x(v,_,y),v}))}function clipGaps(e,l,t,n,i,s){let o=null;if(e.length>0){o=new Path2D;const r=0==l?rectH:rectV;let a=t;for(let l=0;l<e.length;l++){let t=e[l];if(t[1]>t[0]){let e=t[0]-a;e>0&&r(o,a,n,e,n+s),a=t[1]}}let u=t+i-a;u>0&&r(o,a,n,u,n+s)}return o}function addGap(e,l,t){let n=e[e.length-1];n&&n[0]==l?n[1]=t:e.push([l,t])}function findGaps(e,l,t,n,i,s,o){let r=[],a=e.length;for(let u=1==i?t:n;u>=t&&u<=n;u+=i){if(null===l[u]){let c=u,f=u;if(1==i)for(;++u<=n&&null===l[u];)f=u;else for(;--u>=t&&null===l[u];)f=u;let p=s(e[c]),d=f==c?p:s(e[f]),m=c-i;p=o<=0&&m>=0&&m<a?s(e[m]):p;let h=f+i;d=o>=0&&h>=0&&h<a?s(e[h]):d,d>=p&&r.push([p,d])}}return r}function pxRoundGen(e){return 0==e?retArg0:1==e?round:l=>incrRound(l,e)}function rect(e){let l=0==e?moveToH:moveToV,t=0==e?(e,l,t,n,i,s)=>{e.arcTo(l,t,n,i,s)}:(e,l,t,n,i,s)=>{e.arcTo(t,l,i,n,s)},n=0==e?(e,l,t,n,i)=>{e.rect(l,t,n,i)}:(e,l,t,n,i)=>{e.rect(t,l,i,n)};return(e,i,s,o,r,a=0,u=0)=>{0==a&&0==u?n(e,i,s,o,r):(a=min(a,o/2,r/2),u=min(u,o/2,r/2),l(e,i+a,s),t(e,i+o,s,i+o,s+r,a),t(e,i+o,s+r,i,s+r,u),t(e,i,s+r,i,s,u),t(e,i,s,i+o,s,a),e.closePath())}}const moveToH=(e,l,t)=>{e.moveTo(l,t)},moveToV=(e,l,t)=>{e.moveTo(t,l)},lineToH=(e,l,t)=>{e.lineTo(l,t)},lineToV=(e,l,t)=>{e.lineTo(t,l)},rectH=rect(0),rectV=rect(1),arcH=(e,l,t,n,i,s)=>{e.arc(l,t,n,i,s)},arcV=(e,l,t,n,i,s)=>{e.arc(t,l,n,i,s)},bezierCurveToH=(e,l,t,n,i,s,o)=>{e.bezierCurveTo(l,t,n,i,s,o)},bezierCurveToV=(e,l,t,n,i,s,o)=>{e.bezierCurveTo(t,l,i,n,o,s)};function points(e){return(e,l,t,n,i)=>orient(e,l,((l,s,o,r,a,u,c,f,p,d,m)=>{let h,g,{pxRound:x,points:S}=l;0==r.ori?(h=moveToH,g=arcH):(h=moveToV,g=arcV);const w=roundDec(S.width*pxRatio,3);let _=(S.size-S.width)/2*pxRatio,y=roundDec(2*_,3),T=new Path2D,b=new Path2D,{left:v,top:D,width:P,height:R}=e.bbox;rectH(b,v-y,D-y,P+2*y,R+2*y);const E=e=>{if(null!=o[e]){let l=x(u(s[e],r,d,f)),t=x(c(o[e],a,m,p));h(T,l+_,t),g(T,l,t,_,0,2*PI)}};if(i)i.forEach(E);else for(let e=t;e<=n;e++)E(e);return{stroke:w>0?T:null,fill:T,clip:b,flags:3}}))}function _drawAcc(e){return(l,t,n,i,s,o)=>{n!=i&&(s!=n&&o!=n&&e(l,t,n),s!=i&&o!=i&&e(l,t,i),e(l,t,o))}}const drawAccH=_drawAcc(lineToH),drawAccV=_drawAcc(lineToV);function linear(e){const l=ifNull(e?.alignGaps,0);return(e,t,n,i)=>orient(e,t,((s,o,r,a,u,c,f,p,d,m,h)=>{let g,x,S=s.pxRound,w=e=>S(c(e,a,m,p)),_=e=>S(f(e,u,h,d));0==a.ori?(g=lineToH,x=drawAccH):(g=lineToV,x=drawAccV);const y=a.dir*(0==a.ori?1:-1),T={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},b=T.stroke;let v,D,P,R=inf,E=-inf,O=w(o[1==y?n:i]),N=nonNullIdx(r,n,i,1*y),k=nonNullIdx(r,n,i,-1*y),M=w(o[N]),A=w(o[k]),L=!1;for(let e=1==y?n:i;e>=n&&e<=i;e+=y){let l=w(o[e]),t=r[e];l==O?null!=t?(D=_(t),R==inf&&(g(b,l,D),v=D),R=min(D,R),E=max(D,E)):null===t&&(L=!0):(R!=inf&&(x(b,O,R,E,v,D),P=O),null!=t?(D=_(t),g(b,l,D),R=E=v=D):(R=inf,E=-inf,null===t&&(L=!0)),O=l)}R!=inf&&R!=E&&P!=O&&x(b,O,R,E,v,D);let[I,C]=bandFillClipDirs(e,t);if(null!=s.fill||0!=I){let l=T.fill=new Path2D(b),n=_(s.fillTo(e,t,s.min,s.max,I));g(l,A,n),g(l,M,n)}if(!s.spanGaps){let u=[];L&&u.push(...findGaps(o,r,n,i,y,w,l)),T.gaps=u=s.gaps(e,t,n,i,u),T.clip=clipGaps(u,a.ori,p,d,m,h)}return 0!=C&&(T.band=2==C?[clipBandLine(e,t,n,i,b,-1),clipBandLine(e,t,n,i,b,1)]:clipBandLine(e,t,n,i,b,C)),T}))}function stepped(e){const l=ifNull(e.align,1),t=ifNull(e.ascDesc,!1),n=ifNull(e.alignGaps,0),i=ifNull(e.extend,!1);return(e,s,o,r)=>orient(e,s,((a,u,c,f,p,d,m,h,g,x,S)=>{let w=a.pxRound,{left:_,width:y}=e.bbox,T=e=>w(d(e,f,x,h)),b=e=>w(m(e,p,S,g)),v=0==f.ori?lineToH:lineToV;const D={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},P=D.stroke,R=f.dir*(0==f.ori?1:-1);o=nonNullIdx(c,o,r,1),r=nonNullIdx(c,o,r,-1);let E=b(c[1==R?o:r]),O=T(u[1==R?o:r]),N=O,k=O;i&&-1==l&&(k=_,v(P,k,E)),v(P,O,E);for(let e=1==R?o:r;e>=o&&e<=r;e+=R){let t=c[e];if(null==t)continue;let n=T(u[e]),i=b(t);1==l?v(P,n,E):v(P,N,i),v(P,n,i),E=i,N=n}let M=N;i&&1==l&&(M=_+y,v(P,M,E));let[A,L]=bandFillClipDirs(e,s);if(null!=a.fill||0!=A){let l=D.fill=new Path2D(P),t=b(a.fillTo(e,s,a.min,a.max,A));v(l,M,t),v(l,k,t)}if(!a.spanGaps){let i=[];i.push(...findGaps(u,c,o,r,R,T,n));let p=a.width*pxRatio/2,d=t||1==l?p:-p,m=t||-1==l?-p:p;i.forEach((e=>{e[0]+=d,e[1]+=m})),D.gaps=i=a.gaps(e,s,o,r,i),D.clip=clipGaps(i,f.ori,h,g,x,S)}return 0!=L&&(D.band=2==L?[clipBandLine(e,s,o,r,P,-1),clipBandLine(e,s,o,r,P,1)]:clipBandLine(e,s,o,r,P,L)),D}))}function bars(e){const l=ifNull((e=e||EMPTY_OBJ).size,[.6,inf,1]),t=e.align||0,n=(e.gap||0)*pxRatio;let i=e.radius;i=null==i?[0,0]:"number"==typeof i?[i,0]:i;const s=fnOrSelf(i),o=1-l[0],r=ifNull(l[1],inf)*pxRatio,a=ifNull(l[2],1)*pxRatio,u=ifNull(e.disp,EMPTY_OBJ),c=ifNull(e.each,(e=>{})),{fill:f,stroke:p}=u;return(e,l,i,d)=>orient(e,l,((m,h,g,x,S,w,_,y,T,b,v)=>{let D,P,R=m.pxRound;0==x.ori?[D,P]=s(e,l):[P,D]=s(e,l);const E=x.dir*(0==x.ori?1:-1),O=S.dir*(1==S.ori?1:-1);let N,k,M=0==x.ori?rectH:rectV,A=0==x.ori?c:(e,l,t,n,i,s,o)=>{c(e,l,t,i,n,o,s)},[L,I]=bandFillClipDirs(e,l),C=3==S.distr?1==L?S.max:S.min:0,z=_(C,S,v,T),F=R(m.width*pxRatio),H=!1,V=null,G=null,Y=null,W=null;null==f||0!=F&&null==p||(H=!0,V=f.values(e,l,i,d),G=new Map,new Set(V).forEach((e=>{null!=e&&G.set(e,new Path2D)})),F>0&&(Y=p.values(e,l,i,d),W=new Map,new Set(Y).forEach((e=>{null!=e&&W.set(e,new Path2D)}))));let{x0:B,size:U}=u;if(null!=B&&null!=U){h=B.values(e,l,i,d),2==B.unit&&(h=h.map((l=>e.posToVal(y+l*b,x.key,!0))));let t=U.values(e,l,i,d);k=2==U.unit?t[0]*b:w(t[0],x,b,y)-w(0,x,b,y),k=R(k-F),N=1==E?-F/2:k+F/2}else{let e=b;if(h.length>1){let l=null;for(let t=0,n=1/0;t<h.length;t++)if(void 0!==g[t]){if(null!=l){let i=abs(h[t]-h[l]);i<n&&(n=i,e=abs(w(h[t],x,b,y)-w(h[l],x,b,y)))}l=t}}k=R(min(r,max(a,e-e*o))-F-n),N=(0==t?k/2:t==E?0:k)-t*E*n/2}const j={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:3};let q;0!=I&&(j.band=new Path2D,q=R(_(1==I?S.max:S.min,S,v,T)));const X=H?null:new Path2D,J=j.band;let{y0:K,y1:Z}=u,$=null;null!=K&&null!=Z&&(g=Z.values(e,l,i,d),$=K.values(e,l,i,d));let Q=D*k,ee=P*k;for(let t=1==E?i:d;t>=i&&t<=d;t+=E){let n=g[t];if(void 0===n)continue;let i=w(2!=x.distr||null!=u?h[t]:t,x,b,y),s=_(ifNull(n,C),S,v,T);null!=$&&null!=n&&(z=_($[t],S,v,T));let o=R(i-N),r=R(max(s,z)),a=R(min(s,z)),c=r-a;if(null!=n){let i=n<0?ee:Q,s=n<0?Q:ee;H?(F>0&&null!=Y[t]&&M(W.get(Y[t]),o,a+floor(F/2),k,max(0,c-F),i,s),null!=V[t]&&M(G.get(V[t]),o,a+floor(F/2),k,max(0,c-F),i,s)):M(X,o,a+floor(F/2),k,max(0,c-F),i,s),A(e,l,t,o-F/2,a,k+F,c)}0!=I&&(O*I==1?(r=a,a=q):(a=r,r=q),c=r-a,M(J,o-F/2,a,k+F,max(0,c),0,0))}return F>0&&(j.stroke=H?W:X),j.fill=H?G:X,j}))}function splineInterp(e,l){const t=ifNull(l?.alignGaps,0);return(l,n,i,s)=>orient(l,n,((o,r,a,u,c,f,p,d,m,h,g)=>{let x,S,w,_=o.pxRound,y=e=>_(f(e,u,h,d)),T=e=>_(p(e,c,g,m));0==u.ori?(x=moveToH,w=lineToH,S=bezierCurveToH):(x=moveToV,w=lineToV,S=bezierCurveToV);const b=u.dir*(0==u.ori?1:-1);i=nonNullIdx(a,i,s,1),s=nonNullIdx(a,i,s,-1);let v=y(r[1==b?i:s]),D=v,P=[],R=[];for(let e=1==b?i:s;e>=i&&e<=s;e+=b){if(null!=a[e]){let l=y(r[e]);P.push(D=l),R.push(T(a[e]))}}const E={stroke:e(P,R,x,w,S,_),fill:null,clip:null,band:null,gaps:null,flags:1},O=E.stroke;let[N,k]=bandFillClipDirs(l,n);if(null!=o.fill||0!=N){let e=E.fill=new Path2D(O),t=T(o.fillTo(l,n,o.min,o.max,N));w(e,D,t),w(e,v,t)}if(!o.spanGaps){let e=[];e.push(...findGaps(r,a,i,s,b,y,t)),E.gaps=e=o.gaps(l,n,i,s,e),E.clip=clipGaps(e,u.ori,d,m,h,g)}return 0!=k&&(E.band=2==k?[clipBandLine(l,n,i,s,O,-1),clipBandLine(l,n,i,s,O,1)]:clipBandLine(l,n,i,s,O,k)),E}))}function monotoneCubic(e){return splineInterp(_monotoneCubic,e)}function _monotoneCubic(e,l,t,n,i,s){const o=e.length;if(o<2)return null;const r=new Path2D;if(t(r,e[0],l[0]),2==o)n(r,e[1],l[1]);else{let t=Array(o),n=Array(o-1),s=Array(o-1),a=Array(o-1);for(let t=0;t<o-1;t++)s[t]=l[t+1]-l[t],a[t]=e[t+1]-e[t],n[t]=s[t]/a[t];t[0]=n[0];for(let e=1;e<o-1;e++)0===n[e]||0===n[e-1]||n[e-1]>0!=n[e]>0?t[e]=0:(t[e]=3*(a[e-1]+a[e])/((2*a[e]+a[e-1])/n[e-1]+(a[e]+2*a[e-1])/n[e]),isFinite(t[e])||(t[e]=0));t[o-1]=n[o-2];for(let n=0;n<o-1;n++)i(r,e[n]+a[n]/3,l[n]+t[n]*a[n]/3,e[n+1]-a[n]/3,l[n+1]-t[n+1]*a[n]/3,e[n+1],l[n+1])}return r}const cursorPlots=new Set;function invalidateRects(){for(let e of cursorPlots)e.syncRect(!0)}domEnv&&(on(resize,win,invalidateRects),on(scroll,win,invalidateRects,!0),on(dppxchange,win,(()=>{uPlot.pxRatio=pxRatio})));const linearPath=linear(),pointsPath=points();function setDefaults(e,l,t,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map(((e,n)=>setDefault(e,n,l,t)))}function setDefaults2(e,l){return e.map(((e,t)=>0==t?null:assign({},l,e)))}function setDefault(e,l,t,n){return assign({},0==l?t:n,e)}function snapNumX(e,l,t){return null==l?nullNullTuple:[l,t]}const snapTimeX=snapNumX;function snapNumY(e,l,t){return null==l?nullNullTuple:rangeNum(l,t,.1,!0)}function snapLogY(e,l,t,n){return null==l?nullNullTuple:rangeLog(l,t,e.scales[n].log,!1)}const snapLogX=snapLogY;function snapAsinhY(e,l,t,n){return null==l?nullNullTuple:rangeAsinh(l,t,e.scales[n].log,!1)}const snapAsinhX=snapAsinhY;function findIncr(e,l,t,n,i){let s=max(numIntDigits(e),numIntDigits(l)),o=l-e,r=closestIdx(i/n*o,t);do{let e=t[r],l=n*e/o;if(l>=i&&s+(e<5?fixedDec.get(e):0)<=17)return[e,l]}while(++r<t.length);return[0,0]}function pxRatioFont(e){let l,t;return[e=e.replace(/(\d+)px/,((e,n)=>(l=round((t=+n)*pxRatio))+"px")),l,t]}function syncFontSize(e){e.show&&[e.font,e.labelFont].forEach((e=>{let l=roundDec(e[2]*pxRatio,1);e[0]=e[0].replace(/[0-9.]+px/,l+"px"),e[1]=l}))}function uPlot(e,l,t){const n={mode:ifNull(e.mode,1)},i=n.mode;function s(e,l){return((3==l.distr?log10(e>0?e:l.clamp(n,e,l.min,l.max,l.key)):4==l.distr?asinh(e,l.asinh):e)-l._min)/(l._max-l._min)}function o(e,l,t,n){let i=s(e,l);return n+t*(-1==l.dir?1-i:i)}function r(e,l,t,n){let i=s(e,l);return n+t*(-1==l.dir?i:1-i)}function a(e,l,t,n){return 0==l.ori?o(e,l,t,n):r(e,l,t,n)}n.valToPosH=o,n.valToPosV=r;let u=!1;n.status=0;const c=n.root=placeDiv(UPLOT);if(null!=e.id&&(c.id=e.id),addClass(c,e.class),e.title){placeDiv(TITLE,c).textContent=e.title}const f=placeTag("canvas"),p=n.ctx=f.getContext("2d"),d=placeDiv(WRAP,c);on("click",d,(e=>{(pl!=al||dl!=ul)&&wl.click(n,e)}),!0);const m=n.under=placeDiv(UNDER,d);d.appendChild(f);const h=n.over=placeDiv(OVER,d),g=+ifNull((e=copy(e)).pxAlign,1),x=pxRoundGen(g);(e.plugins||[]).forEach((l=>{l.opts&&(e=l.opts(n,e)||e)}));const S=e.ms||.001,w=n.series=1==i?setDefaults(e.series||[],xSeriesOpts,ySeriesOpts,!1):setDefaults2(e.series||[null],xySeriesOpts),_=n.axes=setDefaults(e.axes||[],xAxisOpts,yAxisOpts,!0),y=n.scales={},T=n.bands=e.bands||[];T.forEach((e=>{e.fill=fnOrSelf(e.fill||null),e.dir=ifNull(e.dir,-1)}));const b=2==i?w[1].facets[0].scale:w[0].scale,v={axes:function(){for(let e=0;e<_.length;e++){let l=_[e];if(!l.show||!l._show)continue;let t,i,s=l.side,o=s%2,r=l.stroke(n,e),u=0==s||3==s?-1:1;if(l.label){let e=l.labelGap*u,n=round((l._lpos+e)*pxRatio);Ue(l.labelFont[0],r,"center",2==s?TOP:BOTTOM),p.save(),1==o?(t=i=0,p.translate(n,round(oe+ae/2)),p.rotate((3==s?-PI:PI)/2)):(t=round(se+re/2),i=n),p.fillText(l.label,t,i),p.restore()}let[c,f]=l._found;if(0==f)continue;let d=y[l.scale],m=0==o?re:ae,h=0==o?se:oe,g=round(l.gap*pxRatio),S=l._splits,w=2==d.distr?S.map((e=>Ve[e])):S,T=2==d.distr?Ve[S[1]]-Ve[S[0]]:c,b=l.ticks,v=l.border,D=b.show?round(b.size*pxRatio):0,P=l._rotate*-PI/180,R=x(l._pos*pxRatio),E=R+(D+g)*u;i=0==o?E:0,t=1==o?E:0;let O=l.font[0],N=1==l.align?LEFT:2==l.align?RIGHT:P>0?LEFT:P<0?RIGHT:0==o?"center":3==s?RIGHT:LEFT;Ue(O,r,N,P||1==o?"middle":2==s?TOP:BOTTOM);let k=1.5*l.font[1],M=S.map((e=>x(a(e,d,m,h)))),A=l._values;for(let e=0;e<A.length;e++){let l=A[e];if(null!=l){0==o?t=M[e]:i=M[e],l=""+l;let n=-1==l.indexOf("\n")?[l]:l.split(/\n/gm);for(let e=0;e<n.length;e++){let l=n[e];P?(p.save(),p.translate(t,i+e*k),p.rotate(P),p.fillText(l,0,0),p.restore()):p.fillText(l,t,i+e*k)}}}b.show&&$e(M,b.filter(n,w,e,f,T),o,s,R,D,roundDec(b.width*pxRatio,3),b.stroke(n,e),b.dash,b.cap);let L=l.grid;L.show&&$e(M,L.filter(n,w,e,f,T),o,0==o?2:1,0==o?oe:se,0==o?ae:re,roundDec(L.width*pxRatio,3),L.stroke(n,e),L.dash,L.cap),v.show&&$e([R],[1],0==o?1:0,0==o?1:2,1==o?oe:se,1==o?ae:re,roundDec(v.width*pxRatio,3),v.stroke(n,e),v.dash,v.cap)}Zl("drawAxes")},series:function(){Pe>0&&(w.forEach(((e,t)=>{if(t>0&&e.show&&null==e._paths){let s=2==i?[0,l[t][0].length-1]:function(e){let l=clamp(Re-1,0,Pe-1),t=clamp(Ee+1,0,Pe-1);for(;null==e[l]&&l>0;)l--;for(;null==e[t]&&t<Pe-1;)t++;return[l,t]}(l[t]);e._paths=e.paths(n,t,s[0],s[1])}})),w.forEach(((e,l)=>{if(l>0&&e.show){He!=e.alpha&&(p.globalAlpha=He=e.alpha),qe(l,!1),e._paths&&Xe(l,!1);{qe(l,!0);let t=e._paths?e._paths.gaps:null,i=e.points.show(n,l,Re,Ee,t),s=e.points.filter(n,l,i,t);(i||s)&&(e.points._paths=e.points.paths(n,l,Re,Ee,s),Xe(l,!0))}1!=He&&(p.globalAlpha=He=1),Zl("drawSeries",l)}})))}},D=(e.drawOrder||["axes","series"]).map((e=>v[e]));function P(l){let t=y[l];if(null==t){let n=(e.scales||EMPTY_OBJ)[l]||EMPTY_OBJ;if(null!=n.from)P(n.from),y[l]=assign({},y[n.from],n,{key:l});else{t=y[l]=assign({},l==b?xScaleOpts:yScaleOpts,n),t.key=l;let e=t.time,s=t.range,o=isArr(s);if((l!=b||2==i&&!e)&&(!o||null!=s[0]&&null!=s[1]||(s={min:null==s[0]?autoRangePart:{mode:1,hard:s[0],soft:s[0]},max:null==s[1]?autoRangePart:{mode:1,hard:s[1],soft:s[1]}},o=!1),!o&&isObj(s))){let e=s;s=(l,t,n)=>null==t?nullNullTuple:rangeNum(t,n,e)}t.range=fnOrSelf(s||(e?snapTimeX:l==b?3==t.distr?snapLogX:4==t.distr?snapAsinhX:snapNumX:3==t.distr?snapLogY:4==t.distr?snapAsinhY:snapNumY)),t.auto=fnOrSelf(!o&&t.auto),t.clamp=fnOrSelf(t.clamp||clampScale),t._min=t._max=null}}}P("x"),P("y"),1==i&&w.forEach((e=>{P(e.scale)})),_.forEach((e=>{P(e.scale)}));for(let l in e.scales)P(l);const R=y[b],E=R.distr;let O,N;0==R.ori?(addClass(c,"u-hz"),O=o,N=r):(addClass(c,"u-vt"),O=r,N=o);const k={};for(let e in y){let l=y[e];null==l.min&&null==l.max||(k[e]={min:l.min,max:l.max},l.min=l.max=null)}const M=e.tzDate||(e=>new Date(round(e/S))),A=e.fmtDate||fmtDate,L=1==S?timeAxisSplitsMs(M):timeAxisSplitsS(M),I=timeAxisVals(M,timeAxisStamps(1==S?_timeAxisStampsMs:_timeAxisStampsS,A)),C=timeSeriesVal(M,timeSeriesStamp(_timeSeriesStamp,A)),z=[],F=n.legend=assign({},legendOpts,e.legend),H=F.show,V=F.markers;let G;F.idxs=z,V.width=fnOrSelf(V.width),V.dash=fnOrSelf(V.dash),V.stroke=fnOrSelf(V.stroke),V.fill=fnOrSelf(V.fill);let Y,W=[],B=[],U=!1,j={};if(F.live){const e=w[1]?w[1].values:null;U=null!=e,Y=U?e(n,1,0):{_:0};for(let e in Y)j[e]="--"}if(H)if(G=placeTag("table",LEGEND,c),F.mount(n,G),U){let e=placeTag("tr","u-thead",G);for(var q in placeTag("th",null,e),Y)placeTag("th","u-label",e).textContent=q}else addClass(G,"u-inline"),F.live&&addClass(G,"u-live");const X={show:!0},J={show:!1};const K=new Map;function Z(e,l,t){const i=K.get(l)||{},s=xe.bind[e](n,l,t);s&&(on(e,l,i[e]=s),K.set(l,i))}function $(e,l,t){const n=K.get(l)||{};for(let t in n)null!=e&&t!=e||(off(t,l,n[t]),delete n[t]);null==e&&K.delete(l)}let Q=0,ee=0,le=0,te=0,ne=0,ie=0,se=0,oe=0,re=0,ae=0;n.bbox={};let ue=!1,ce=!1,fe=!1,pe=!1,de=!1,me=!1;function he(e,l,t){(t||e!=n.width||l!=n.height)&&ge(e,l),ll(!1),fe=!0,ce=!0,xe.left>=0&&(pe=me=!0),hl()}function ge(e,l){n.width=Q=le=e,n.height=ee=te=l,ne=ie=0,function(){let e=!1,l=!1,t=!1,n=!1;_.forEach(((i,s)=>{if(i.show&&i._show){let{side:s,_size:o}=i,r=s%2,a=o+(null!=i.label?i.labelSize:0);a>0&&(r?(le-=a,3==s?(ne+=a,n=!0):t=!0):(te-=a,0==s?(ie+=a,e=!0):l=!0))}})),Te[0]=e,Te[1]=t,Te[2]=l,Te[3]=n,le-=De[1]+De[3],ne+=De[3],te-=De[2]+De[0],ie+=De[0]}(),function(){let e=ne+le,l=ie+te,t=ne,n=ie;function i(i,s){switch(i){case 1:return e+=s,e-s;case 2:return l+=s,l-s;case 3:return t-=s,t+s;case 0:return n-=s,n+s}}_.forEach(((e,l)=>{if(e.show&&e._show){let l=e.side;e._pos=i(l,e._size),null!=e.label&&(e._lpos=i(l,e.labelSize))}}))}();let t=n.bbox;se=t.left=incrRound(ne*pxRatio,.5),oe=t.top=incrRound(ie*pxRatio,.5),re=t.width=incrRound(le*pxRatio,.5),ae=t.height=incrRound(te*pxRatio,.5)}n.setSize=function({width:e,height:l}){he(e,l)};const xe=n.cursor=assign({},cursorOpts,{drag:{y:2==i}},e.cursor);{xe.idxs=z,xe._lock=!1;let e=xe.points;e.show=fnOrSelf(e.show),e.size=fnOrSelf(e.size),e.stroke=fnOrSelf(e.stroke),e.width=fnOrSelf(e.width),e.fill=fnOrSelf(e.fill)}const Se=n.focus=assign({},e.focus||{alpha:.3},xe.focus);0!=Se.bias&&(Se.prox=1e5);const we=Se.prox>=0;let _e=[null];function ye(e,l){if(1==i||l>0){let l=1==i&&y[e.scale].time,t=e.value;e.value=l?isStr(t)?timeSeriesVal(M,timeSeriesStamp(t,A)):t||C:t||numSeriesVal,e.label=e.label||(l?"Time":"Value")}if(l>0){e.width=null==e.width?1:e.width,e.paths=e.paths||linearPath||retNull,e.fillTo=fnOrSelf(e.fillTo||seriesFillTo),e.pxAlign=+ifNull(e.pxAlign,g),e.pxRound=pxRoundGen(e.pxAlign),e.stroke=fnOrSelf(e.stroke||null),e.fill=fnOrSelf(e.fill||null),e._stroke=e._fill=e._paths=e._focus=null;let l=ptDia(max(1,e.width),1),t=e.points=assign({},{size:l,width:max(1,.2*l),stroke:e.stroke,space:2*l,paths:pointsPath,_stroke:null,_fill:null},e.points);t.show=fnOrSelf(t.show),t.filter=fnOrSelf(t.filter),t.fill=fnOrSelf(t.fill),t.stroke=fnOrSelf(t.stroke),t.paths=fnOrSelf(t.paths),t.pxAlign=e.pxAlign}if(H){let t=function(e,l){if(0==l&&(U||!F.live||2==i))return nullNullTuple;let t=[],s=placeTag("tr","u-series",G,G.childNodes[l]);addClass(s,e.class),e.show||addClass(s,OFF);let o=placeTag("th",null,s);if(V.show){let e=placeDiv("u-marker",o);if(l>0){let t=V.width(n,l);t&&(e.style.border=t+"px "+V.dash(n,l)+" "+V.stroke(n,l)),e.style.background=V.fill(n,l)}}let r=placeDiv("u-label",o);for(var a in r.textContent=e.label,l>0&&(V.show||(r.style.color=e.width>0?V.stroke(n,l):V.fill(n,l)),Z("click",o,(l=>{if(xe._lock)return;let t=w.indexOf(e);if((l.ctrlKey||l.metaKey)!=F.isolate){let e=w.some(((e,l)=>l>0&&l!=t&&e.show));w.forEach(((l,n)=>{n>0&&Pl(n,e?n==t?X:J:X,!0,$l.setSeries)}))}else Pl(t,{show:!e.show},!0,$l.setSeries)})),we&&Z(mouseenter,o,(l=>{xe._lock||Pl(w.indexOf(e),Nl,!0,$l.setSeries)}))),Y){let e=placeTag("td","u-value",s);e.textContent="--",t.push(e)}return[s,t]}(e,l);W.splice(l,0,t[0]),B.splice(l,0,t[1]),F.values.push(null)}if(xe.show){z.splice(l,0,null);let t=function(e,l){if(l>0){let t=xe.points.show(n,l);if(t)return addClass(t,CURSOR_PT),addClass(t,e.class),elTrans(t,-10,-10,le,te),h.insertBefore(t,_e[l]),t}}(e,l);t&&_e.splice(l,0,t)}Zl("addSeries",l)}n.addSeries=function(e,l){l=null==l?w.length:l,e=1==i?setDefault(e,l,xSeriesOpts,ySeriesOpts):setDefault(e,l,null,xySeriesOpts),w.splice(l,0,e),ye(w[l],l)},n.delSeries=function(e){if(w.splice(e,1),H){F.values.splice(e,1),B.splice(e,1);let l=W.splice(e,1)[0];$(null,l.firstChild),l.remove()}xe.show&&(z.splice(e,1),_e.length>1&&_e.splice(e,1)[0].remove()),Zl("delSeries",e)};const Te=[!1,!1,!1,!1];function be(e,l,t,n){let[i,s,o,r]=t,a=l%2,u=0;return 0==a&&(r||s)&&(u=0==l&&!i||2==l&&!o?round(xAxisOpts.size/3):0),1==a&&(i||o)&&(u=1==l&&!s||3==l&&!r?round(yAxisOpts.size/2):0),u}const ve=n.padding=(e.padding||[be,be,be,be]).map((e=>fnOrSelf(ifNull(e,be)))),De=n._padding=ve.map(((e,l)=>e(n,l,Te,0)));let Pe,Re=null,Ee=null;const Oe=1==i?w[0].idxs:null;let Ne,ke,Me,Ae,Le,Ie,Ce,ze,Fe,He,Ve=null,Ge=!1;function Ye(e,t){if(l=null==e?[]:copy(e,fastIsObj),2==i){Pe=0;for(let e=1;e<w.length;e++)Pe+=l[e][0].length;n.data=l=e}else if(null==l[0]&&(l[0]=[]),n.data=l.slice(),Ve=l[0],Pe=Ve.length,2==E){l[0]=Array(Pe);for(let e=0;e<Pe;e++)l[0][e]=e}if(n._data=l,ll(!0),Zl("setData"),2==E&&(fe=!0),!1!==t){let e=R;e.auto(n,Ge)?We():Dl(b,e.min,e.max),pe=xe.left>=0,me=!0,hl()}}function We(){let e,t;Ge=!0,1==i&&(Pe>0?(Re=Oe[0]=0,Ee=Oe[1]=Pe-1,e=l[0][Re],t=l[0][Ee],2==E?(e=Re,t=Ee):1==Pe&&(3==E?[e,t]=rangeLog(e,e,R.log,!1):4==E?[e,t]=rangeAsinh(e,e,R.log,!1):R.time?t=e+round(86400/S):[e,t]=rangeNum(e,t,.1,!0))):(Re=Oe[0]=e=null,Ee=Oe[1]=t=null)),Dl(b,e,t)}function Be(e,l,t,n,i,s){e??="#0000",t??=EMPTY_ARR,n??="butt",i??="#0000",s??="round",e!=Ne&&(p.strokeStyle=Ne=e),i!=ke&&(p.fillStyle=ke=i),l!=Me&&(p.lineWidth=Me=l),s!=Le&&(p.lineJoin=Le=s),n!=Ie&&(p.lineCap=Ie=n),t!=Ae&&p.setLineDash(Ae=t)}function Ue(e,l,t,n){l!=ke&&(p.fillStyle=ke=l),e!=Ce&&(p.font=Ce=e),t!=ze&&(p.textAlign=ze=t),n!=Fe&&(p.textBaseline=Fe=n)}function je(e,l,t,i,s=0){if(i.length>0&&e.auto(n,Ge)&&(null==l||null==l.min)){let l=ifNull(Re,0),n=ifNull(Ee,i.length-1),o=null==t.min?3==e.distr?getMinMaxLog(i,l,n):getMinMax(i,l,n,s):[t.min,t.max];e.min=min(e.min,t.min=o[0]),e.max=max(e.max,t.max=o[1])}}function qe(e,l){let t=l?w[e].points:w[e];t._stroke=t.stroke(n,e),t._fill=t.fill(n,e)}function Xe(e,t){let i=t?w[e].points:w[e],s=i._stroke,o=i._fill,{stroke:r,fill:a,clip:u,flags:c}=i._paths,f=null,d=roundDec(i.width*pxRatio,3),m=d%2/2;t&&null==o&&(o=d>0?"#fff":s);let h=1==i.pxAlign;if(h&&p.translate(m,m),!t){let e=se,l=oe,t=re,n=ae,s=d*pxRatio/2;0==i.min&&(n+=s),0==i.max&&(l-=s,n+=s),f=new Path2D,f.rect(e,l,t,n)}t?Je(s,d,i.dash,i.cap,o,r,a,c,u):function(e,t,i,s,o,r,a,u,c,f,p){let d=!1;T.forEach(((m,h)=>{if(m.series[0]==e){let e,g=w[m.series[1]],x=l[m.series[1]],S=(g._paths||EMPTY_OBJ).band;isArr(S)&&(S=1==m.dir?S[0]:S[1]);let _=null;g.show&&S&&hasData(x,Re,Ee)?(_=m.fill(n,h)||r,e=g._paths.clip):S=null,Je(t,i,s,o,_,a,u,c,f,p,e,S),d=!0}})),d||Je(t,i,s,o,r,a,u,c,f,p)}(e,s,d,i.dash,i.cap,o,r,a,c,f,u),h&&p.translate(-m,-m)}n.setData=Ye;function Je(e,l,t,n,i,s,o,r,a,u,c,f){Be(e,l,t,n,i),(a||u||f)&&(p.save(),a&&p.clip(a),u&&p.clip(u)),f?3==(3&r)?(p.clip(f),c&&p.clip(c),Ze(i,o),Ke(e,s,l)):2&r?(Ze(i,o),p.clip(f),Ke(e,s,l)):1&r&&(p.save(),p.clip(f),c&&p.clip(c),Ze(i,o),p.restore(),Ke(e,s,l)):(Ze(i,o),Ke(e,s,l)),(a||u||f)&&p.restore()}function Ke(e,l,t){t>0&&(l instanceof Map?l.forEach(((e,l)=>{p.strokeStyle=Ne=l,p.stroke(e)})):null!=l&&e&&p.stroke(l))}function Ze(e,l){l instanceof Map?l.forEach(((e,l)=>{p.fillStyle=ke=l,p.fill(e)})):null!=l&&e&&p.fill(l)}function $e(e,l,t,n,i,s,o,r,a,u){let c=o%2/2;1==g&&p.translate(c,c),Be(r,o,a,u,r),p.beginPath();let f,d,m,h,x=i+(0==n||3==n?-s:s);0==t?(d=i,h=x):(f=i,m=x);for(let n=0;n<e.length;n++)null!=l[n]&&(0==t?f=m=e[n]:d=h=e[n],p.moveTo(f,d),p.lineTo(m,h));p.stroke(),1==g&&p.translate(-c,-c)}function Qe(e){let l=!0;return _.forEach(((t,i)=>{if(!t.show)return;let s=y[t.scale];if(null==s.min)return void(t._show&&(l=!1,t._show=!1,ll(!1)));t._show||(l=!1,t._show=!0,ll(!1));let o=t.side,r=o%2,{min:a,max:u}=s,[c,f]=function(e,l,t,i){let s,o=_[e];if(i<=0)s=[0,0];else{let r=o._space=o.space(n,e,l,t,i);s=findIncr(l,t,o._incrs=o.incrs(n,e,l,t,i,r),i,r)}return o._found=s}(i,a,u,0==r?le:te);if(0==f)return;let p=2==s.distr,d=t._splits=t.splits(n,i,a,u,c,f,p),m=2==s.distr?d.map((e=>Ve[e])):d,h=2==s.distr?Ve[d[1]]-Ve[d[0]]:c,g=t._values=t.values(n,t.filter(n,m,i,f,h),i,f,h);t._rotate=2==o?t.rotate(n,g,i,f):0;let x=t._size;t._size=ceil(t.size(n,g,i,e)),null!=x&&t._size!=x&&(l=!1)})),l}function el(e){let l=!0;return ve.forEach(((t,i)=>{let s=t(n,i,Te,e);s!=De[i]&&(l=!1),De[i]=s})),l}function ll(e){w.forEach(((l,t)=>{t>0&&(l._paths=null,e&&(1==i?(l.min=null,l.max=null):l.facets.forEach((e=>{e.min=null,e.max=null}))))}))}let tl,nl,il,sl,ol,rl,al,ul,cl,fl,pl,dl,ml=!1;function hl(){ml||(microTask(gl),ml=!0)}function gl(){ue&&(!function(){let e=copy(y,fastIsObj);for(let l in e){let t=e[l],s=k[l];if(null!=s&&null!=s.min)assign(t,s),l==b&&ll(!0);else if(l!=b||2==i)if(0==Pe&&null==t.from){let e=t.range(n,null,null,l);t.min=e[0],t.max=e[1]}else t.min=inf,t.max=-inf}if(Pe>0){w.forEach(((t,s)=>{if(1==i){let i=t.scale,o=e[i],r=k[i];if(0==s){let e=o.range(n,o.min,o.max,i);o.min=e[0],o.max=e[1],Re=closestIdx(o.min,l[0]),Ee=closestIdx(o.max,l[0]),Ee-Re>1&&(l[0][Re]<o.min&&Re++,l[0][Ee]>o.max&&Ee--),t.min=Ve[Re],t.max=Ve[Ee]}else t.show&&t.auto&&je(o,r,t,l[s],t.sorted);t.idxs[0]=Re,t.idxs[1]=Ee}else if(s>0&&t.show&&t.auto){let[n,i]=t.facets,o=n.scale,r=i.scale,[a,u]=l[s];je(e[o],k[o],n,a,n.sorted),je(e[r],k[r],i,u,i.sorted),t.min=i.min,t.max=i.max}}));for(let l in e){let t=e[l],i=k[l];if(null==t.from&&(null==i||null==i.min)){let e=t.range(n,t.min==inf?null:t.min,t.max==-inf?null:t.max,l);t.min=e[0],t.max=e[1]}}}for(let l in e){let t=e[l];if(null!=t.from){let i=e[t.from];if(null==i.min)t.min=t.max=null;else{let e=t.range(n,i.min,i.max,l);t.min=e[0],t.max=e[1]}}}let t={},s=!1;for(let l in e){let n=e[l],i=y[l];if(i.min!=n.min||i.max!=n.max){i.min=n.min,i.max=n.max;let e=i.distr;i._min=3==e?log10(i.min):4==e?asinh(i.min,i.asinh):i.min,i._max=3==e?log10(i.max):4==e?asinh(i.max,i.asinh):i.max,t[l]=s=!0}}if(s){w.forEach(((e,l)=>{2==i?l>0&&t.y&&(e._paths=null):t[e.scale]&&(e._paths=null)}));for(let e in t)fe=!0,Zl("setScale",e);xe.show&&xe.left>=0&&(pe=me=!0)}for(let e in k)k[e]=null}(),ue=!1),fe&&(!function(){let e=!1,l=0;for(;!e;){l++;let t=Qe(l),i=el(l);e=3==l||t&&i,e||(ge(n.width,n.height),ce=!0)}}(),fe=!1),ce&&(setStylePx(m,LEFT,ne),setStylePx(m,TOP,ie),setStylePx(m,WIDTH,le),setStylePx(m,HEIGHT,te),setStylePx(h,LEFT,ne),setStylePx(h,TOP,ie),setStylePx(h,WIDTH,le),setStylePx(h,HEIGHT,te),setStylePx(d,WIDTH,Q),setStylePx(d,HEIGHT,ee),f.width=round(Q*pxRatio),f.height=round(ee*pxRatio),_.forEach((({_el:e,_show:l,_size:t,_pos:n,side:i})=>{if(null!=e)if(l){let l=i%2==1;setStylePx(e,l?"left":"top",n-(3===i||0===i?t:0)),setStylePx(e,l?"width":"height",t),setStylePx(e,l?"top":"left",l?ie:ne),setStylePx(e,l?"height":"width",l?te:le),remClass(e,OFF)}else addClass(e,OFF)})),Ne=ke=Me=Le=Ie=Ce=ze=Fe=Ae=null,He=1,Vl(!0),Zl("setSize"),ce=!1),Q>0&&ee>0&&(p.clearRect(0,0,f.width,f.height),Zl("drawClear"),D.forEach((e=>e())),Zl("draw")),Tl.show&&de&&(vl(Tl),de=!1),xe.show&&pe&&(Fl(null,!0,!1),pe=!1),F.show&&F.live&&me&&(Cl(),me=!1),u||(u=!0,n.status=1,Zl("ready")),Ge=!1,ml=!1}function xl(e,t){let i=y[e];if(null==i.from){if(0==Pe){let l=i.range(n,t.min,t.max,e);t.min=l[0],t.max=l[1]}if(t.min>t.max){let e=t.min;t.min=t.max,t.max=e}if(Pe>1&&null!=t.min&&null!=t.max&&t.max-t.min<1e-16)return;e==b&&2==i.distr&&Pe>0&&(t.min=closestIdx(t.min,l[0]),t.max=closestIdx(t.max,l[0]),t.min==t.max&&t.max++),k[e]=t,ue=!0,hl()}}n.redraw=(e,l)=>{fe=l||!1,!1!==e?Dl(b,R.min,R.max):hl()},n.setScale=xl;let Sl=!1;const wl=xe.drag;let _l=wl.x,yl=wl.y;xe.show&&(xe.x&&(tl=placeDiv(CURSOR_X,h)),xe.y&&(nl=placeDiv(CURSOR_Y,h)),0==R.ori?(il=tl,sl=nl):(il=nl,sl=tl),pl=xe.left,dl=xe.top);const Tl=n.select=assign({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),bl=Tl.show?placeDiv(SELECT,Tl.over?h:m):null;function vl(e,l){if(Tl.show){for(let l in e)Tl[l]=e[l],l in Wl&&setStylePx(bl,l,e[l]);!1!==l&&Zl("setSelect")}}function Dl(e,l,t){xl(e,{min:l,max:t})}function Pl(e,l,t,s){null!=l.focus&&function(e){if(e!=Ol){let l=null==e,t=1!=Se.alpha;w.forEach(((n,i)=>{let s=l||0==i||i==e;n._focus=l?null:s,t&&function(e,l){w[e].alpha=l,xe.show&&_e[e]&&(_e[e].style.opacity=l);H&&W[e]&&(W[e].style.opacity=l)}(i,s?1:Se.alpha)})),Ol=e,t&&hl()}}(e),null!=l.show&&w.forEach(((t,n)=>{n>0&&(e==n||null==e)&&(t.show=l.show,function(e,l){let t=w[e],n=H?W[e]:null;t.show?n&&remClass(n,OFF):(n&&addClass(n,OFF),_e.length>1&&elTrans(_e[e],-10,-10,le,te))}(n,l.show),Dl(2==i?t.facets[1].scale:t.scale,null,null),hl())})),!1!==t&&Zl("setSeries",e,l),s&&lt("setSeries",n,e,l)}let Rl,El,Ol;n.setSelect=vl,n.setSeries=Pl,n.addBand=function(e,l){e.fill=fnOrSelf(e.fill||null),e.dir=ifNull(e.dir,-1),l=null==l?T.length:l,T.splice(l,0,e)},n.setBand=function(e,l){assign(T[e],l)},n.delBand=function(e){null==e?T.length=0:T.splice(e,1)};const Nl={focus:!0};function kl(e,l,t){let n=y[l];t&&(e=e/pxRatio-(1==n.ori?ie:ne));let i=le;1==n.ori&&(i=te,e=i-e),-1==n.dir&&(e=i-e);let s=n._min,o=s+(n._max-s)*(e/i),r=n.distr;return 3==r?pow(10,o):4==r?sinh(o,n.asinh):o}function Ml(e,l){setStylePx(bl,LEFT,Tl.left=e),setStylePx(bl,WIDTH,Tl.width=l)}function Al(e,l){setStylePx(bl,TOP,Tl.top=e),setStylePx(bl,HEIGHT,Tl.height=l)}H&&we&&on(mouseleave,G,(e=>{xe._lock||null!=Ol&&Pl(null,Nl,!0,$l.setSeries)})),n.valToIdx=e=>closestIdx(e,l[0]),n.posToIdx=function(e,t){return closestIdx(kl(e,b,t),l[0],Re,Ee)},n.posToVal=kl,n.valToPos=(e,l,t)=>0==y[l].ori?o(e,y[l],t?re:le,t?se:0):r(e,y[l],t?ae:te,t?oe:0),n.batch=function(e){e(n),hl()},n.setCursor=(e,l,t)=>{pl=e.left,dl=e.top,Fl(null,l,t)};let Ll=0==R.ori?Ml:Al,Il=1==R.ori?Ml:Al;function Cl(e,l){null!=e&&(e.idxs?e.idxs.forEach(((e,l)=>{z[l]=e})):void 0!==e.idx&&z.fill(e.idx),F.idx=z[0]);for(let e=0;e<w.length;e++)(e>0||1==i&&!U)&&zl(e,z[e]);H&&F.live&&function(){if(H&&F.live)for(let e=2==i?1:0;e<w.length;e++){if(0==e&&U)continue;let l=F.values[e],t=0;for(let n in l)B[e][t++].firstChild.nodeValue=l[n]}}(),me=!1,!1!==l&&Zl("setLegend")}function zl(e,t){let i,s=w[e],o=0==e&&2==E?Ve:l[e];U?i=s.values(n,e,t)??j:(i=s.value(n,null==t?null:o[t],e,t),i=null==i?j:{_:i}),F.values[e]=i}function Fl(e,t,s){let o;cl=pl,fl=dl,[pl,dl]=xe.move(n,pl,dl),xe.show&&(il&&elTrans(il,round(pl),0,le,te),sl&&elTrans(sl,0,round(dl),le,te));let r=Re>Ee;Rl=inf;let a=0==R.ori?le:te,u=1==R.ori?le:te;if(pl<0||0==Pe||r){o=null;for(let e=0;e<w.length;e++)e>0&&_e.length>1&&elTrans(_e[e],-10,-10,le,te);we&&Pl(null,Nl,!0,null==e&&$l.setSeries),F.live&&(z.fill(o),me=!0)}else{let e,t,s;1==i&&(e=0==R.ori?pl:dl,t=kl(e,b),o=closestIdx(t,l[0],Re,Ee),s=O(l[0][o],R,a,0));for(let e=2==i?1:0;e<w.length;e++){let r=w[e],c=z[e],f=1==i?l[e][c]:l[e][1][c],p=xe.dataIdx(n,e,o,t),d=1==i?l[e][p]:l[e][1][p];me=me||d!=f||p!=c,z[e]=p;let m=incrRoundUp(p==o?s:O(1==i?l[0][p]:l[e][0][p],R,a,0),1);if(e>0&&r.show){let l,t,s=null==d?-10:incrRoundUp(N(d,1==i?y[r.scale]:y[r.facets[1].scale],u,0),1);if(we&&s>=0&&1==i){let l=abs(s-dl),t=Se.bias;if(0!=t){let n=kl(1==R.ori?pl:dl,r.scale),i=n>=0?1:-1;i==(d>=0?1:-1)&&l<Rl&&(1==i?1==t?d>=n:d<=n:1==t?d<=n:d>=n)&&(Rl=l,El=e)}else l<Rl&&(Rl=l,El=e)}if(0==R.ori?(l=m,t=s):(l=s,t=m),me&&_e.length>1){elColor(_e[e],xe.points.fill(n,e),xe.points.stroke(n,e));let i,s,o,r,a=!0,u=xe.points.bbox;if(null!=u){a=!1;let l=u(n,e);o=l.left,r=l.top,i=l.width,s=l.height}else o=l,r=t,i=s=xe.points.size(n,e);elSize(_e[e],i,s,a),elTrans(_e[e],o,r,le,te)}}}}if(xe.idx=o,xe.left=pl,xe.top=dl,me&&(F.idx=o,Cl()),Tl.show&&Sl)if(null!=e){let[l,t]=$l.scales,[n,i]=$l.match,[s,o]=e.cursor.sync.scales,r=e.cursor.drag;if(_l=r._x,yl=r._y,_l||yl){let r,c,f,p,d,{left:m,top:h,width:g,height:x}=e.select,S=e.scales[l].ori,w=e.posToVal,_=null!=l&&n(l,s),T=null!=t&&i(t,o);_&&_l?(0==S?(r=m,c=g):(r=h,c=x),f=y[l],p=O(w(r,s),f,a,0),d=O(w(r+c,s),f,a,0),Ll(min(p,d),abs(d-p))):Ll(0,a),T&&yl?(1==S?(r=m,c=g):(r=h,c=x),f=y[t],p=N(w(r,o),f,u,0),d=N(w(r+c,o),f,u,0),Il(min(p,d),abs(d-p))):Il(0,u)}else Bl()}else{let e=abs(cl-ol),l=abs(fl-rl);if(1==R.ori){let t=e;e=l,l=t}_l=wl.x&&e>=wl.dist,yl=wl.y&&l>=wl.dist;let t,n,i=wl.uni;null!=i?_l&&yl&&(_l=e>=i,yl=l>=i,_l||yl||(l>e?yl=!0:_l=!0)):wl.x&&wl.y&&(_l||yl)&&(_l=yl=!0),_l&&(0==R.ori?(t=al,n=pl):(t=ul,n=dl),Ll(min(t,n),abs(n-t)),yl||Il(0,u)),yl&&(1==R.ori?(t=al,n=pl):(t=ul,n=dl),Il(min(t,n),abs(n-t)),_l||Ll(0,a)),_l||yl||(Ll(0,0),Il(0,0))}if(wl._x=_l,wl._y=yl,null==e){if(s){if(null!=Ql){let[e,l]=$l.scales;$l.values[0]=null!=e?kl(0==R.ori?pl:dl,e):null,$l.values[1]=null!=l?kl(1==R.ori?pl:dl,l):null}lt(mousemove,n,pl,dl,le,te,o)}if(we){let e=s&&$l.setSeries,l=Se.prox;null==Ol?Rl<=l&&Pl(El,Nl,!0,e):Rl>l?Pl(null,Nl,!0,e):El!=Ol&&Pl(El,Nl,!0,e)}}!1!==t&&Zl("setCursor")}n.setLegend=Cl;let Hl=null;function Vl(e){!0===e?Hl=null:(Hl=h.getBoundingClientRect(),Zl("syncRect",Hl))}function Gl(e,l,t,n,i,s,o){xe._lock||Sl&&null!=e&&0==e.movementX&&0==e.movementY||(Yl(e,l,t,n,i,s,o,!1,null!=e),null!=e?Fl(null,!0,!0):Fl(l,!0,!1))}function Yl(e,l,t,i,s,o,r,u,c){if(null==Hl&&Vl(!1),null!=e)t=e.clientX-Hl.left,i=e.clientY-Hl.top;else{if(t<0||i<0)return pl=-10,void(dl=-10);let[e,n]=$l.scales,r=l.cursor.sync,[u,c]=r.values,[f,p]=r.scales,[d,m]=$l.match,h=l.axes[0].side%2==1,g=0==R.ori?le:te,x=1==R.ori?le:te,S=h?o:s,w=h?s:o,_=h?i:t,T=h?t:i;if(t=null!=f?d(e,f)?a(u,y[e],g,0):-10:g*(_/S),i=null!=p?m(n,p)?a(c,y[n],x,0):-10:x*(T/w),1==R.ori){let e=t;t=i,i=e}}c&&((t<=1||t>=le-1)&&(t=incrRound(t,le)),(i<=1||i>=te-1)&&(i=incrRound(i,te))),u?(ol=t,rl=i,[al,ul]=xe.move(n,t,i)):(pl=t,dl=i)}const Wl={width:0,height:0,left:0,top:0};function Bl(){vl(Wl,!1)}function Ul(e,l,t,i,s,o,r){Sl=!0,_l=yl=wl._x=wl._y=!1,Yl(e,l,t,i,s,o,0,!0,!1),null!=e&&(Z(mouseup,doc,jl),lt(mousedown,n,al,ul,le,te,null))}function jl(e,l,t,i,s,o,r){Sl=wl._x=wl._y=!1,Yl(e,l,t,i,s,o,0,!1,!0);let{left:a,top:u,width:c,height:f}=Tl,p=c>0||f>0;if(p&&vl(Tl),wl.setScale&&p){let e=a,l=c,t=u,n=f;if(1==R.ori&&(e=u,l=f,t=a,n=c),_l&&Dl(b,kl(e,b),kl(e+l,b)),yl)for(let e in y){let l=y[e];e!=b&&null==l.from&&l.min!=inf&&Dl(e,kl(t+n,e),kl(t,e))}Bl()}else xe.lock&&(xe._lock=!xe._lock,xe._lock||Fl(null,!0,!1));null!=e&&($(mouseup,doc),lt(mouseup,n,pl,dl,le,te,null))}function ql(e,l,t,i,s,o,r){We(),Bl(),null!=e&&lt(dblclick,n,pl,dl,le,te,null)}function Xl(){_.forEach(syncFontSize),he(n.width,n.height,!0)}on(dppxchange,win,Xl);const Jl={};Jl.mousedown=Ul,Jl.mousemove=Gl,Jl.mouseup=jl,Jl.dblclick=ql,Jl.setSeries=(e,l,t,n)=>{Pl(t,n,!0,!1)},xe.show&&(Z(mousedown,h,Ul),Z(mousemove,h,Gl),Z(mouseenter,h,Vl),Z(mouseleave,h,(function(e,l,t,n,i,s,o){if(!xe._lock){let e=Sl;if(Sl){let e,l,t=!0,n=!0,i=10;0==R.ori?(e=_l,l=yl):(e=yl,l=_l),e&&l&&(t=pl<=i||pl>=le-i,n=dl<=i||dl>=te-i),e&&t&&(pl=pl<al?0:le),l&&n&&(dl=dl<ul?0:te),Fl(null,!0,!0),Sl=!1}pl=-10,dl=-10,Fl(null,!0,!0),e&&(Sl=e)}})),Z(dblclick,h,ql),cursorPlots.add(n),n.syncRect=Vl);const Kl=n.hooks=e.hooks||{};function Zl(e,l,t){e in Kl&&Kl[e].forEach((e=>{e.call(null,n,l,t)}))}(e.plugins||[]).forEach((e=>{for(let l in e.hooks)Kl[l]=(Kl[l]||[]).concat(e.hooks[l])}));const $l=assign({key:null,setSeries:!1,filters:{pub:retTrue,sub:retTrue},scales:[b,w[1]?w[1].scale:null],match:[retEq,retEq],values:[null,null]},xe.sync);xe.sync=$l;const Ql=$l.key,et=_sync(Ql);function lt(e,l,t,n,i,s,o){$l.filters.pub(e,l,t,n,i,s,o)&&et.pub(e,l,t,n,i,s,o)}function tt(){Zl("init",e,l),Ye(l||e.data,!1),k[b]?xl(b,k[b]):We(),de=Tl.show,pe=me=!0,he(e.width,e.height)}return et.sub(n),n.pub=function(e,l,t,n,i,s,o){$l.filters.sub(e,l,t,n,i,s,o)&&Jl[e](null,l,t,n,i,s,o)},n.destroy=function(){et.unsub(n),cursorPlots.delete(n),K.clear(),off(dppxchange,win,Xl),c.remove(),G?.remove(),Zl("destroy")},w.forEach(ye),_.forEach((function(e,l){if(e._show=e.show,e.show){let t=e.side%2,i=y[e.scale];null==i&&(e.scale=t?w[1].scale:b,i=y[e.scale]);let s=i.time;e.size=fnOrSelf(e.size),e.space=fnOrSelf(e.space),e.rotate=fnOrSelf(e.rotate),e.incrs=fnOrSelf(e.incrs||(2==i.distr?wholeIncrs:s?1==S?timeIncrsMs:timeIncrsS:numIncrs)),e.splits=fnOrSelf(e.splits||(s&&1==i.distr?L:3==i.distr?logAxisSplits:4==i.distr?asinhAxisSplits:numAxisSplits)),e.stroke=fnOrSelf(e.stroke),e.grid.stroke=fnOrSelf(e.grid.stroke),e.ticks.stroke=fnOrSelf(e.ticks.stroke),e.border.stroke=fnOrSelf(e.border.stroke);let o=e.values;e.values=isArr(o)&&!isArr(o[0])?fnOrSelf(o):s?isArr(o)?timeAxisVals(M,timeAxisStamps(o,A)):isStr(o)?timeAxisVal(M,o):o||I:o||numAxisVals,e.filter=fnOrSelf(e.filter||(i.distr>=3&&10==i.log?log10AxisValsFilt:retArg1)),e.font=pxRatioFont(e.font),e.labelFont=pxRatioFont(e.labelFont),e._size=e.size(n,null,l,0),e._space=e._rotate=e._incrs=e._found=e._splits=e._values=null,e._size>0&&(Te[l]=!0,e._el=placeDiv(AXIS,d))}})),t?t instanceof HTMLElement?(t.appendChild(c),tt()):t(n,tt):tt(),n}uPlot.assign=assign,uPlot.fmtNum=fmtNum,uPlot.rangeNum=rangeNum,uPlot.rangeLog=rangeLog,uPlot.rangeAsinh=rangeAsinh,uPlot.orient=orient,uPlot.pxRatio=pxRatio,uPlot.join=join,uPlot.fmtDate=fmtDate,uPlot.tzDate=tzDate,uPlot.sync=_sync;{uPlot.addGap=addGap,uPlot.clipGaps=clipGaps;let e=uPlot.paths={points:points};e.linear=linear,e.stepped=stepped,e.bars=bars,e.spline=monotoneCubic}export{uPlot as default};
